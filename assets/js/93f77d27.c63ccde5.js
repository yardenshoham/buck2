"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2155],{3905:(e,t,n)=>{n.r(t),n.d(t,{MDXContext:()=>s,MDXProvider:()=>u,mdx:()=>b,useMDXComponents:()=>d,withMDXComponents:()=>p});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){return function(t){var n=d(t.components);return r.createElement(e,i({},t,{components:n}))}},d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=d(n),u=a,m=p["".concat(o,".").concat(u)]||p[u]||h[u]||i;return n?r.createElement(m,l(l({ref:t},s),{},{components:n})):r.createElement(m,l({ref:t},s))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=f;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[m]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},66082:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const i={},o="Key concepts",l={unversionedId:"legacy/basics/key-concepts",id:"legacy/basics/key-concepts",title:"Key concepts",description:"Buck has a number of fundamental concepts:",source:"@site/../docs/legacy/basics/key-concepts.md",sourceDirName:"legacy/basics",slug:"/legacy/basics/key-concepts",permalink:"/docs/legacy/basics/key-concepts",draft:!1,tags:[],version:"current",frontMatter:{}},c={},s=[{value:"Buck&#39;s dependency graph",id:"bucks-dependency-graph",level:3},{value:"Multiple Buck projects in a single repository",id:"multiple-buck-projects-in-a-single-repository",level:3}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,a.mdx)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.mdx)("h1",{id:"key-concepts"},"Key concepts"),(0,a.mdx)("p",null,"Buck has a number of fundamental concepts:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"A ",(0,a.mdx)("a",{parentName:"li",href:"https://buck.build/concept/build_rule.html"},(0,a.mdx)("strong",{parentName:"a"},(0,a.mdx)("em",{parentName:"strong"},"build rule")))," describes how to produce an output file from a set of input files. Most build rules are specific to a particular language or platform. For example, you would use the ",(0,a.mdx)("a",{parentName:"li",href:"https://buck.build/rule/cxx_binary.html"},(0,a.mdx)("inlineCode",{parentName:"a"},"cxx_binary"))," rule to create a C++ binary, but you would use the ",(0,a.mdx)("a",{parentName:"li",href:"https://buck.build/rule/android_binary.html"},(0,a.mdx)("inlineCode",{parentName:"a"},"android_binary"))," rule to create an Android APK."),(0,a.mdx)("li",{parentName:"ul"},"A ",(0,a.mdx)("a",{parentName:"li",href:"https://buck.build/concept/build_target.html"},(0,a.mdx)("strong",{parentName:"a"},(0,a.mdx)("em",{parentName:"strong"},"build target")))," is a string that uniquely identifies a build rule. It can be thought of as a URI for the build rule within the Buck project."),(0,a.mdx)("li",{parentName:"ul"},"A ",(0,a.mdx)("a",{parentName:"li",href:"https://buck.build/concept/build_file.html"},(0,a.mdx)("strong",{parentName:"a"},(0,a.mdx)("em",{parentName:"strong"},"build file")))," defines one or more build rules. In Buck, build files are typically named ",(0,a.mdx)("inlineCode",{parentName:"li"},"BUCK"),". A ",(0,a.mdx)("inlineCode",{parentName:"li"},"BUCK")," file is analogous to the ",(0,a.mdx)("inlineCode",{parentName:"li"},"Makefile")," used by the Make utility. In your project, you will usually have a separate ",(0,a.mdx)("inlineCode",{parentName:"li"},"BUCK")," file for each buildable unit of software\u2014such as a binary or library. For large projects, you could have hundreds of ",(0,a.mdx)("inlineCode",{parentName:"li"},"BUCK")," files.")),(0,a.mdx)("p",null,"A Buck ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("em",{parentName:"strong"},"package"))," comprises: a Buck build file (a ",(0,a.mdx)("inlineCode",{parentName:"p"},"BUCK")," file), all files\u2014such as source files and headers\u2014in the same directory as the ",(0,a.mdx)("inlineCode",{parentName:"p"},"BUCK")," file or in subdirectories, provided those subdirectories do not themselves contain a ",(0,a.mdx)("inlineCode",{parentName:"p"},"BUCK")," file. To say it another way, a ",(0,a.mdx)("inlineCode",{parentName:"p"},"BUCK")," file defines the root of a package, but Buck packages might not include all their subdirectories because Buck packages do not overlap or contain other Buck packages.\nFor example, in the following diagram, the BUCK file in directory ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-1")," defines that directory as the root of a package\u2014which is labeled ",(0,a.mdx)("strong",{parentName:"p"},"Package A")," in the diagram. The directory ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-2")," is part of Package A because it is a subdirectory of ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-1"),", but does not itself contain a BUCK file.\nNow, consider directory ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-3"),". Because ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-3")," contains a BUCK file it is the root of a new package (",(0,a.mdx)("strong",{parentName:"p"},"Package B"),"). Although ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-3")," is a subdirectory of ",(0,a.mdx)("inlineCode",{parentName:"p"},"app-dir-1"),", it is ",(0,a.mdx)("em",{parentName:"p"},"not")," part of Package A.\nBuck has the concept of a ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("em",{parentName:"strong"},"cell")),", which defines a directory tree of one or more Buck packages. A Buck build could involve multiple cells. Cells often correspond to repositories, but this isn't required.\nThe root of a Buck cell contains a global configuration file called ",(0,a.mdx)("a",{parentName:"p",href:"https://buck.build/files-and-dirs/buckconfig.html"},(0,a.mdx)("strong",{parentName:"a"},(0,a.mdx)("inlineCode",{parentName:"strong"},".buckconfig"))),". Note that although the cell root should contain a ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig"),", the presence of a ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," file doesn't in itself define a cell. Rather, ",(0,a.mdx)("em",{parentName:"p"},"the cells involved in a build are defined at the time Buck is invoked"),"; they are specified in the ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," for the Buck ",(0,a.mdx)("em",{parentName:"p"},"project")," (see below).\nA Buck ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("em",{parentName:"strong"},"project"))," is defined by the ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," where Buck is invoked, or if that directory doesn't contain a ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig"),", the project is defined by the ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," in the nearest ancestor directory.\nThe ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," for the project specifies the cells that constitute the Buck project. Specifically, these cells are specified in the ",(0,a.mdx)("a",{parentName:"p",href:"https://buck.build/files-and-dirs/buckconfig.html#repositories"},(0,a.mdx)("inlineCode",{parentName:"a"},"[repositories]"))," section of the ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig"),". Note that the directory tree rooted at this ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," is automatically considered a cell by Buck; in other words, the project's ",(0,a.mdx)("inlineCode",{parentName:"p"},".buckconfig")," doesn't need to specify the project cell explicitly\u2014although it is a good practice to do so."),(0,a.mdx)("h3",{id:"bucks-dependency-graph"},"Buck's dependency graph"),(0,a.mdx)("p",null,"Every build rule can have zero or more dependencies. You can specify these dependencies using, for example, the ",(0,a.mdx)("inlineCode",{parentName:"p"},"deps")," argument to the build rule. For more information about specifying dependencies, consult the reference page for the build rule you are using.\nThese dependencies form a directed graph, called the ",(0,a.mdx)("em",{parentName:"p"},"target graph"),'. Buck requires the graph to be acyclic. When building the output of a build rule, all of the rule\'s transitive dependencies are built first. This means that the graph is built in a "bottom-up" fashion. A build rule knows only which rules it depends on, not which rules depend on it. This makes the graph easier to reason about and enables Buck to identify independent subgraphs that can be built in parallel. It also enables Buck to determine the minimal set of build targets that need to be rebuilt.\nFor more information about how Buck leverages the graph of build dependencies, see ',(0,a.mdx)("a",{parentName:"p",href:"https://buck.build/concept/what_makes_buck_so_fast.html"},"What Makes Buck so Fast"),"."),(0,a.mdx)("h3",{id:"multiple-buck-projects-in-a-single-repository"},"Multiple Buck projects in a single repository"),(0,a.mdx)("p",null,"Buck is designed to build multiple deliverables from a single repository\u2014that is, a ",(0,a.mdx)("em",{parentName:"p"},"monorepo"),"\u2014rather than from multiple repositories. Support for the monorepo design motivated Buck's support for cells and projects.\nIt is Facebook's experience that maintaining all dependencies in the same repository makes it easier to ensure that all developers have the correct version of the code and simplifies the process of making atomic commits."))}d.isMDXComponent=!0}}]);